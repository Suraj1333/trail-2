<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }}</title>
        <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22> {{ emoji }} </text></svg>">
    <link rel="stylesheet" href="/style.css">
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
</head>
<body>

    {% include 'header.njk' %}
    <main>

        {{ content | safe }}
        
    </main>

    {% include 'footer.njk' %}


    <script>
    
        if (window.netlifyIdentity) {
            window.netlifyIdentity.on("init", user => {
            if (!user) {
                window.netlifyIdentity.on("login", () => {
                document.location.href = "/admin/";
                });
            }
            });
        }
        
        
let darkMode = localStorage.getItem('darkMode'); 

const darkModeToggle = document.querySelector('#dark-mode-toggle');

const enableDarkMode = () => {
  
  document.body.classList.add('darkmode');
  
  localStorage.setItem('darkMode', 'enabled');
}

const disableDarkMode = () => {
  
  document.body.classList.remove('darkmode');
  
  localStorage.setItem('darkMode', null);
}
 

if (darkMode === 'enabled') {
  enableDarkMode();
}


darkModeToggle.addEventListener('click', () => {

  darkMode = localStorage.getItem('darkMode'); 
  

  if (darkMode !== 'enabled') {
    enableDarkMode();
   
  } else {  
    disableDarkMode(); 
  }
});

        
</script>
    
</body>
</html>
